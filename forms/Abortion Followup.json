{
  "name" : "Abortion Followup",
  "uuid" : "e38e9e5a-ebad-473c-920a-f308a940b0c5",
  "formType" : "ProgramEncounter",
  "formElementGroups" : [ {
    "uuid" : "3bab0ef9-333d-4dcc-9212-ffbeee0e11f5",
    "name" : "Details",
    "displayOrder" : 1.0,
    "display" : "Details",
    "formElements" : [ {
      "name" : "How many times a day does mother change the clothes?",
      "uuid" : "14454cec-8d6a-4665-931c-93f6dff88bf8",
      "keyValues" : [ ],
      "concept" : {
        "name" : "How many times a day does mother change the clothes?",
        "uuid" : "0f3c0b07-0014-468d-b01d-9fa1fb60801a"
      },
      "displayOrder" : 1.0,
      "type" : "SingleSelect",
      "validFormat" : {
        "regex" : "^[0-9]$",
        "descriptionKey" : "Required1Digit"
      },
      "mandatory" : true
    } ]
  }, {
    "uuid" : "e292ae45-0c3a-4d93-9924-973029b37835",
    "name" : "Woman's examination",
    "displayOrder" : 2.0,
    "display" : "Woman's examination",
    "formElements" : [  {
      "name" : "Temperature",
      "uuid" : "9dea43cf-b8e2-4de2-946a-58e8809def57",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Temperature(celcius)",
        "uuid" : "0c6d2587-382d-4762-8871-b6890d854505"
      },
      "displayOrder" : 2.0,
      "type" : "SingleSelect",
      "validFormat" : {
        "regex" : "^[0-9]{1,2}(\\.[0-9])??$",
        "descriptionKey" : "requiredFormatxxDotx"
      },
      "mandatory" : false
    }, {
      "name" : "Pulse",
      "uuid" : "f1fa81bb-6bd0-43df-a1c7-b2cef26ee2ca",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Pulse",
        "uuid" : "630c0fa3-38f7-427d-a8dd-f1417cf1b7dc"
      },
      "displayOrder" : 3.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Blood Pressure (systolic)",
      "uuid" : "63db4e9f-398f-4bd5-be3e-bc0d2a1f5c2f",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Blood Pressure (systolic)",
        "uuid" : "6874d48e-8c2f-4009-992c-1d3ca1678cc6"
      },
      "displayOrder" : 4.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Blood Pressure (Diastolic)",
      "uuid" : "f3843757-7dd8-4961-8262-fd6e7fa4f989",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Blood Pressure (Diastolic)",
        "uuid" : "da871f6c-cef0-4191-b307-6751b31ac9ec"
      },
      "displayOrder" : 5.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Is there foul smelling discharge PV",
      "uuid" : "10669a3f-4d89-44b8-9509-fe01c6ab2a75",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Is there foul smelling discharge PV",
        "uuid" : "7764a974-7ba8-4a13-9ba9-6d8d580f3c99"
      },
      "displayOrder" : 6.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Does mother has seizures?",
      "uuid" : "4e485aa3-8cdf-41f1-a936-05e81e9e0491",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Does mother has seizures?",
        "uuid" : "74c618b3-a4e0-4382-9486-70dbf5752d9d"
      },
      "displayOrder" : 7.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Does mother has any breast related issue like swelling, cracked nipple etc?",
      "uuid" : "655197db-f98e-4b6a-a23e-1a35307a6fd0",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Does mother has any breast related issue like swelling, cracked nipple etc?",
        "uuid" : "43567d78-ad97-46bc-afa1-8522ec9e0180"
      },
      "displayOrder" : 8.0,
      "type" : "SingleSelect",
      "mandatory" : true
    } ]
  }, {
    "uuid" : "75f33f74-3ac6-4472-aba6-f0c69dd971b3",
    "name" : "Referral",
    "displayOrder" : 4.0,
    "display" : "Referral",
    "formElements" : [ {
      "name" : "Referral needed to mother?",
      "uuid" : "e4a1171c-3e5a-461a-831e-16a013dfa8b0",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Referral needed to mother?",
        "uuid" : "c75a610f-27c3-4fad-9c26-04887c15436e"
      },
      "displayOrder" : 1.0,
      "type" : "SingleSelect",
      "mandatory" : true
    } ]
  }, {
    "uuid" : "833264a9-53f6-4851-8e28-d12cba14dd71",
    "name" : "Counselling",
    "displayOrder" : 5.0,
    "display" : "Counselling",
    "formElements" : [ {
      "name" : "Counselling done",
      "uuid" : "d7e1de37-e08f-4bbe-927e-ee0325ff018b",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Counselling",
        "uuid" : "0ac30adc-5107-4e30-9b8a-c3ef65904cf5"
      },
      "displayOrder" : 1.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "Family Planning Benefits for Women",
      "uuid" : "9ff41c26-3e8f-4fc7-962e-c46743dee5de",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling" ]
      } ],
      "concept" : {
        "name" : "Family Planning Benefits for Women",
        "uuid" : "dfe26772-b418-4741-a80b-30fcbe452b5f"
      },
      "displayOrder" : 2.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "The benefits of family planning to the child",
      "uuid" : "a375f1ff-ee2a-4190-b395-d9b6a858c0e3",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling" ]
      } ],
      "concept" : {
        "name" : "The benefits of family planning to the child",
        "uuid" : "af57d463-f260-4a58-8b08-18f754d0a5e2"
      },
      "displayOrder" : 3.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "Risks of not adopting family planning",
      "uuid" : "edaaf0c2-a699-42b5-8929-0a34cfe3c60b",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling" ]
      } ],
      "concept" : {
        "name" : "Risks of not adopting family planning",
        "uuid" : "99593b34-a7f6-445f-aa59-7550f8c0f648"
      },
      "displayOrder" : 4.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "The time and interval of pregnancy",
      "uuid" : "1ae5b100-6479-4dcb-9844-43eebe69c58d",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling" ]
      } ],
      "concept" : {
        "name" : "The exact time and interval of pregnancy",
        "uuid" : "9aa87afd-8d1f-4870-9638-7a3b6aefa36d"
      },
      "displayOrder" : 5.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "When is the possibility of the next pregnancy after delivery?",
      "uuid" : "b95712ce-68af-468c-ad8e-e24d5ecb37de",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling" ]
      } ],
      "concept" : {
        "name" : "When is the possibility of the next pregnancy after delivery?",
        "uuid" : "2e5288f0-1f4b-4c72-bd6d-ae4fa072a1d9"
      },
      "displayOrder" : 6.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "Have you thought about using any contraceptive?",
      "uuid" : "a3f1da87-eaf6-4eda-8a3b-f9c11a3d668d",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling" ]
      } ],
      "concept" : {
        "name" : "Have you thought about using any contraceptive",
        "uuid" : "d833658b-ce1f-412d-bc34-086f8d1ba50d"
      },
      "displayOrder" : 7.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "If she had not thought about any contraceptive method, then tell about different methods.",
      "uuid" : "6433a8ad-6253-4b4a-a57b-956271f5e6e6",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling" ]
      } ],
      "concept" : {
        "name" : "If she had not thought about any contraceptive method, then tell about different methods.",
        "uuid" : "1d7ed26e-17f8-4d27-b5e5-a0fc61336032"
      },
      "displayOrder" : 8.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "Provide detailed information about the chosen contraceptive method",
      "uuid" : "10937170-3f70-41b1-af79-2cafb2a06a9c",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling" ]
      } ],
      "concept" : {
        "name" : "Provide detailed information about the chosen contraceptive method",
        "uuid" : "35829406-7047-40a4-a970-17d029f49562"
      },
      "displayOrder" : 9.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "Repeat key points once again",
      "uuid" : "b4919860-7672-43cb-80a1-550a90533418",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling" ]
      } ],
      "concept" : {
        "name" : "Repeat key points once again",
        "uuid" : "65cf7297-98ff-4405-b1df-336325f4d96e"
      },
      "displayOrder" : 10.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "Give information about misconception of contraceptive methods",
      "uuid" : "d6b0ddb6-ce07-4ba0-9379-e984c5e1b4da",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling" ]
      } ],
      "concept" : {
        "name" : "Give information about misconception of contraceptive methods",
        "uuid" : "3eeb5be5-a74b-4cf4-805f-3b8549a5daef"
      },
      "displayOrder" : 11.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "Motivate men to adopt contraceptive method",
      "uuid" : "9f94fe77-7df8-4191-babb-eb0c4bc2830f",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling" ]
      } ],
      "concept" : {
        "name" : "Motivate men to adopt contraceptive method",
        "uuid" : "48b372a3-b491-4c45-8d14-b99e5515daf2"
      },
      "displayOrder" : 12.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "refer the mother to subcenter or ask SHW to visit her to see for sign of sepsis",
      "uuid" : "eca88559-4daf-42e7-a975-6e4433a03439",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling point" ]
      } ],
      "concept" : {
        "name" : "refer the mother to subcenter or ask SHW to visit her to see for sign of sepsis",
        "uuid" : "338bf574-680c-4d8b-94f9-aa2b768dadeb"
      },
      "displayOrder" : 13.0,
      "type" : "SingleSelect",
      "rule" : "({params, imports}) => {\n  const programEncounter = params.entity;\n  const formElement = params.formElement;\n  const statusBuilder = new\n  imports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\n  statusBuilder.show().when.valueInEncounter('How many times a day does mother change the clothes?').is.greaterThan(5);\n  return statusBuilder.build();\n};\n",
      "mandatory" : false
    }, {
      "name" : "refer the woman to SC or ask the SHW to make a home visit",
      "uuid" : "d73ed67b-dd9c-42cb-996c-661c6c3cd5e2",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling point" ]
      } ],
      "concept" : {
        "name" : "refer the woman to SC or ask the SHW to make a home visit",
        "uuid" : "ca2af807-ec9f-4b33-8ffa-e17075979996"
      },
      "displayOrder" : 14.0,
      "type" : "SingleSelect",
      "rule" : "\n'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const formElement = params.formElement;\n  const statusBuilder = new\n  imports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\n  statusBuilder.show().when.valueInEncounter('Is there foul smelling discharge PV').containsAnswerConceptName(\"Yes\")\n  .and.when.valueInEncounter(\"Temperature(celcius)\").is.greaterThan(37.5);\n  return statusBuilder.build();\n};\n",
      "mandatory" : false
    }, {
      "name" : "refer the mother to SC/Ganiyari",
      "uuid" : "8c33c003-0990-446c-b80e-7fa8b2fa89fb",
      "keyValues" : [ {
        "key" : "ExcludedAnswers",
        "value" : [ "Counselling point" ]
      } ],
      "concept" : {
        "name" : "refer the mother to SC/Ganiyari",
        "uuid" : "c3f8600a-aebf-44ea-967e-ff93c11a5946"
      },
      "displayOrder" : 15.0,
      "type" : "SingleSelect",
      "rule" : "\n'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const formElement = params.formElement;\n  const statusBuilder = new\n  imports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\n  statusBuilder.show().when.valueInEncounter('Does mother has seizures?').containsAnswerConceptName(\"Yes\");\n  return statusBuilder.build();\n};\n",
      "mandatory" : false
    }, {
      "name" : "Whether woman want to use any method for family planning",
      "uuid" : "c3f4d1a9-094d-4d15-a4aa-628cd1abc928",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Womane want to use any family plannig",
        "uuid" : "1ade5184-6907-4187-9186-abd12caacf05"
      },
      "displayOrder" : 16.0,
      "type" : "SingleSelect",
      "mandatory" : true
    } ]
  } ],
  "decisionRule" : "",
  "visitScheduleRule" : "\"use strict\";\n({ params, imports }) => {\n  const programEncounter = params.entity;\n  const scheduleBuilder = new imports.rulesConfig.VisitScheduleBuilder({\n    programEncounter\n  });\n  \n  const visitDate = programEncounter.encounterDateTime; \n  const dateOfAbortion = programEncounter.getObservationValue('Date and time of abortion');\n  const encounterScheduleAbortion = [\n    {\"name\": \"Abortion followup-2\", \"earliest\": 7, \"max\": 11 },\n    {\"name\": \"Abortion followup-3\", \"earliest\": 15, \"max\": 19}    \n];\n   \n var schedule = _.chain(encounterScheduleAbortion).filter(e => imports.moment(visitDate).isSameOrBefore(imports.moment(dateOfAbortion).add(e.earliest, 'days'), 'date') === true).filter(e => (programEncounter.programEnrolment.hasEncounter('Abortion followup', e.name)) === false).first().value();\n  \n  if (!_.isEmpty(schedule)) {\n  scheduleBuilder\n    .add({\n      name: schedule.name,\n      encounterType: \"Abortion followup\",\n      earliestDate:  imports.moment(dateOfAbortion).add(schedule.earliest, 'days').toDate() ,\n      maxDate: imports.moment(dateOfAbortion).add(schedule.max, 'days').toDate() \n    });\n  }\n  return scheduleBuilder.getAll();\n};",
  "validationRule" : "",
  "checklistsRule" : ""
}